<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Electrical Preventive Maintenance Checklist</title>
    <link rel="stylesheet" href="../PPMform/ppmform.css" />
  </head>
  <body>
    <div class="container">
      <form id="quaterlyppmForm">
        <!-- Company Details Section -->
        <div class="form-section active" id="companyDetails">
          <h2>Company Details</h2>
          <div class="table-container">
            <table>
              <tr>
                <td><label for="ticketNumber">Ticket Number:</label></td>
                <td><input type="text" id="ticketNumber" required /></td>
              </tr>
              <tr>
                <td><label for="companyName">Company Name:</label></td>
                <td>
                  <select id="companyName" required>
                    <option value="">Select Company</option>
                    <!-- Add options dynamically -->
                  </select>
                </td>
              </tr>
              <tr>
                <td><label for="storeName">Store Name:</label></td>
                <td>
                  <select id="storeName" required>
                    <option value="">Select Store</option>
                    <!-- Add options dynamically -->
                  </select>
                </td>
              </tr>
                <tr>
                            <td><label for="frequency" >Frequency:</label></td>
                            <td><select id="frequency"  name="frequency" required>
                                <option value="">Frequency</option>
                                <option value="monthly">Monthly</option>
                                <!-- Add options dynamically -->
                            </select></td>
                        </tr>
            </table>
          </div>
          <div class="button-group">
            <button
              type="button"
              onclick="showSection('companyDetails', 'quaterlyPPM')"
            >
              Next
            </button>
          </div>
        </div>

        <!-- Quarterly PPM Section -->
        <div class="form-section" id="quaterlyPPM">
          <h2>ELECTRICAL PREVENTIVE MAINTENANCE CHECKLIST - QUARTERLY</h2>
          <div class="mobile-helper">
            For best viewing on mobile devices, please rotate to landscape mode
          </div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Equipment</th>
                  <th>Description</th>
                  <th>Status</th>
                  <th>Comments</th>
                  <th>Photo</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Main Control Panel</td>
                  <td>Ensure cable terminations are proper</td>
                  <td>
                    <select id="mainControlPanel">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="mainControlPanelComment" /></td>
                  <td>
                    <div class="photo-upload">
                      <input
                        type="file"
                        id="mainControlPanelPhoto"
                        name="mainControlPanelPhoto"
                        accept="image/*"
                        onchange="previewPhoto('mainControlPanelPhoto', 'mainControlPanelPreview')"
                      />
                      <input
                        type="hidden"
                        name="mainControlPanelPhotoID"
                        id="mainControlPanelPhotoID"
                      />
                      <button
                        type="button"
                        class="upload-btn"
                        onclick="uploadPhoto('mainControlPanelPhoto', 'file', 'mainControlPanelPreview', 'mainControlPanelPhotoID')"
                      >
                        Upload
                      </button>
                      <img
                        id="mainControlPanelPreview"
                        style="display: none; width: 40px; height: 40px"
                      />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Distribution Boards</td>
                  <td>Ensure cable terminations are proper</td>
                  <td>
                    <select id="distributionBoards">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="distributionBoardsComment" /></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Distribution Boards</td>
                  <td>Check tightness of the connections</td>
                  <td>
                    <select id="distributionBoards2">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="distributionBoards2Comment" /></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Bus Duct</td>
                  <td>Ensure bus terminations are proper</td>
                  <td>
                    <select id="busDuct">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input id="busDuctComment" type="text" /></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Earth Pits</td>
                  <td>Watering and cleaning of Earth Pits</td>
                  <td>
                    <select id="EarthPits">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="EarthPitsComment" /></td>
                  <td>
                    <div class="photo-upload">
                      <input
                        type="file"
                        id="EarthPitsPhoto"
                        name="EarthPitsPhoto"
                        accept="image/*"
                        onchange="previewPhoto('EarthPitsPhoto', 'EarthPitsPreview')"
                      />
                      <input
                        type="hidden"
                        name="EarthPitsPhotoID"
                        id="EarthPitsPhotoID"
                      />
                      <button
                        type="button"
                        class="upload-btn"
                        onclick="uploadPhoto('EarthPitsPhoto', 'file', 'EarthPitsPreview', 'EarthPitsPhotoID')"
                      >
                        Upload
                      </button>
                      <img
                        id="EarthPitsPreview"
                        style="display: none; width: 40px; height: 40px"
                      />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Earth Pits</td>
                  <td>Ensure cable terminations are proper</td>
                  <td>
                    <select id="EarthPits2">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="EarthPits2Comment" /></td>
                  <td>
                    <div class="photo-upload">
                      <input
                        type="file"
                        id="EarthPits2Photo"
                        name="EarthPits2Photo"
                        accept="image/*"
                        onchange="previewPhoto('EarthPits2Photo', 'EarthPits2Preview')"
                      />
                      <input
                        type="hidden"
                        name="EarthPits2PhotoID"
                        id="EarthPits2PhotoID"
                      />
                      <button
                        type="button"
                        class="upload-btn"
                        onclick="uploadPhoto('EarthPits2Photo', 'file', 'EarthPits2PhotoPreview', 'EarthPits2PhotoID')"
                      >
                        Upload
                      </button>
                      <img
                        id="EarthPits2PhotoPreview"
                        style="display: none; width: 40px; height: 40px"
                      />
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Capacitor Panel</td>
                  <td>Ensure cable terminations are proper</td>
                  <td>
                    <select id="CapacitorPanel">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="CapacitorPanelComment" /></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Electric Motors / pumps</td>
                  <td>Ensure all electrical connections are clean and tight</td>
                  <td>
                    <select id="electricMotors">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="electricMotorsComment" /></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Electric Motors / pumps</td>
                  <td>Ensure no vibration or overheating</td>
                  <td>
                    <select id="electricMotors2">
                      <option disabled selected value="">Choose</option>
                      <option value="ok">OK</option>
                      <option value="not-ok">Not OK</option>
                      <option value="na">N/A</option>
                    </select>
                  </td>
                  <td><input type="text" id="electricMotors2Comment" /></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="button-group">
            <button
              type="button"
              onclick="showSection('quaterlyPPM', 'companyDetails')"
            >
              Back
            </button>
            <button
              type="button"
              onclick="showSection('quaterlyPPM', 'selfieSection')"
            >
              Next
            </button>
          </div>
        </div>

        <!-- Selfie Section -->
        <div class="form-section" id="selfieSection">
          <h2>Capture Selfie with Timestamp</h2>
          <div class="camera-container">
            <video id="video" width="100%" height="auto" autoplay></video>
            <canvas id="canvas" style="display: none"></canvas>
          </div>
          <div class="button-group">
            <button
              type="button"
              onclick="showSection('selfieSection', 'quaterlyPPM')"
            >
              Back
            </button>
            <button type="button" onclick="captureSelfie()">
              Capture Selfie
            </button>
            <button
              type="button"
              onclick="showSection('selfieSection', 'previewSection')"
            >
              Next
            </button>
          </div>
          <div class="photo-upload">
            <input type="hidden" name="selfiePhotoID" id="selfiePhotoID" />
            <img
              id="selfiePreview"
              style="display: none; max-width: 100%; height: auto"
            />
          </div>
        </div>

        <!-- Preview Section -->

        <div class="table-container form-section" id="previewSection">
          <h2>Preview</h2>
          <h3>Company Information</h3>
          <p>Company Name: <span id="previewCompanyName"></span></p>
          <p>Store Name: <span id="previewCompanyAddress"></span></p>

          <div id="previewTables"></div>
          <div id="success-message"></div>
          <div id="error-message"></div>
          <div class="button-group">
            <button
              type="button"
              onclick="showSection('previewSection', 'quaterlyPPM')"
            >
              Previous
            </button>
            <button id="submitForm" type="submit">Submit</button>
          </div>
        </div>
      </form>
    </div>

    <script src="../globals/global.js"></script>
    <script src="quaterlyPpm.js"></script>

    <script src="ppmResponsive.js"></script>
  </body>
</html>
